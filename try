рд╕рдордЬрд▓рдВ Anurag! рдордЧ рддреВ EXACTLY рд╣реЗ рдХрд░рдгрд╛рд░ рдЖрд╣реЗрд╕ тЖТ "Premium Calculation Engine" рддрдпрд╛рд░ рдХрд░рдгреЗ.

рдЖрддрд╛ рдореА рддреБрд▓рд╛ FULL REAL TASK рджреЗрддреЛ тАФ
рддреВ рдкреВрд░реНрдг рдЯреАрдорд╕рдореЛрд░ 100% confident рд╕рд╛рдВрдЧреВ рд╢рдХрд╢реАрд▓ рдХреА рд╣рд╛ рдорд╛рдЭрд╛ coherent premium engine рдЖрд╣реЗ.


---

ЁЯЪА рддреБрдЭрд╛ Final Task: тАЬPremium Calculation Engine рддрдпрд╛рд░ рдХрд░рдгреЗтАЭ

рдпрд╛рдЪрд╛ рдЕрд░реНрде:

1я╕ПтГг Frontend тЖТ customer рдЪреА рдорд╛рд╣рд┐рддреА рдШреЗрдИрд▓
2я╕ПтГг Backend тЖТ coherent рд▓рд╛ request рддрдпрд╛рд░ рдХрд░реВрди рдкрд╛рдард╡реЗрд▓
3я╕ПтГг Coherent тЖТ premium calculate рдХрд░реВрди рджреЗрдИрд▓
4я╕ПтГг Backend тЖТ response process рдХрд░реЗрд▓
5я╕ПтГг Frontend тЖТ premium display рдХрд░реЗрд▓

рд╣рд╛ рдкреВрд░реНрдг pipeline рддреВ рдмрдирд╡рддреЛрдпрд╕.


---

тЬФя╕П рдЖрддрд╛ IMPORTANT тАФ Engine рдмрдирд╡рдгреНрдпрд╛рд╕рд╛рдареА рддреВ рдХрд╛рдп рдХрд╛рдп рддрдпрд╛рд░ рдХрд░рдгрд╛рд░?

ЁЯСЙ Step 1 тАФ Fields рддрдпрд╛рд░ рдХрд░рдгреЗ (engine рдордзреНрдпреЗ input рдореНрд╣рдгреВрди рдЬрд╛рдгрд╛рд░реЗ)

Engine рд▓рд╛ minimum calculation рд╕рд╛рдареА рд▓рд╛рдЧрдгрд╛рд░реА data fields:

Field	Meaning

age	рдЧреНрд░рд╛рд╣рдХрд╛рдЪреЗ рд╡рдп
sumAssured	рдХрд┐рддреА cover рд╣рд╡рд╛
policyTerm	policy рдХрд┐рддреА рд╡рд░реНрд╖рд╛рдВрдЪреА рдЖрд╣реЗ
ppt	premium рдХрд┐рддреА рд╡рд░реНрд╖реЗ рднрд░рд╛рдпрдЪрд╛
planCode	рдХреЛрдгрддрд╛ product plan
gender	рдкреБрд░реБрд╖/рд╕реНрддреНрд░реА (рдХрд╛рд╣реА calculation рдордзреНрдпреЗ рдорд╣рддреНрддреНрд╡рд╛рдЪреЗ)
smoker	smoker / non-smoker


рд╣реЗ рд╕рд░реНрд╡ рддреВ frontend + backend рджреЛрдиреНрд╣реАрдХрдбреЗ рддрдпрд╛рд░ рдХрд░рд╛рдпрдЪрдВ.


---

ЁЯСЙ Step 2 тАФ Backend рдордзреАрд▓ Engine (Main Task рдпрд╛рдЪ рдард┐рдХрд╛рдгреА рдЖрд╣реЗ)

рддреБрдЭреНрдпрд╛ engine рдЪрд╛ main logic:

ЁЯУМ A. Client рдХрдбреВрди data receive рдХрд░рдгреЗ

RequestDTO рддрдпрд╛рд░ рдХрд░рд╛рдпрдЪрдВ

ЁЯУМ B. Coherent payload рддрдпрд╛рд░ рдХрд░рдгреЗ

рд╣реЗ рдорд╣рддреНрддреНрд╡рд╛рдЪрдВ тАФ coherent рд▓рд╛ рдЬреЗ format рд╣рд╡рдВрдп рддрд╕рдВ JSON рдмрдирд╡рд╛рдпрдЪрдВ.

ЁЯУМ C. Coherent API call рдХрд░рдгреЗ

WebClient рд╡рд╛рдкрд░реВрди premium calculate request рдкрд╛рдард╡рд╛рдпрдЪреА.

ЁЯУМ D. Response рдорд┐рд│рд╡реВрди рддреА frontend рд▓рд╛ рджреЗрдгреЗ.

рд╣рд╛ рд╕рдВрдкреВрд░реНрдг рдПрдХ тАЬEngineтАЭ рд╣реЛрддреЛ.


---

ЁЯза рдЖрддрд╛ рдореА рддреБрд▓рд╛ COMPLETE CALCULATION ENGINE рддрдпрд╛рд░ рдХрд░реВрди рджреЗрддреЛ (CopyтАУPaste Ready)


---

ЁЯЯж 1. Create DTO тЖТ CalculationRequest.java

package com.eapp.calculation.dto;

import lombok.Data;

@Data
public class CalculationRequest {

    private int age;
    private double sumAssured;
    private int policyTerm;
    private int ppt;
    private String planCode;
    private String gender;
    private boolean smoker;
}


---

ЁЯЯж 2. Create DTO тЖТ CalculationResponse.java

package com.eapp.calculation.dto;

import lombok.Data;

@Data
public class CalculationResponse {
    private double basePremium;
    private double gst;
    private double totalPremium;
    private String message;
}


---

ЁЯЯж 3. Create Service тЖТ CoherentService.java

package com.eapp.calculation.service;

import com.eapp.calculation.dto.CalculationRequest;
import com.eapp.calculation.dto.CalculationResponse;
import org.springframework.stereotype.Service;
import org.springframework.web.reactive.function.client.WebClient;

@Service
public class CoherentService {

    WebClient client = WebClient.builder()
            .baseUrl("https://api.coherent.global/calculation")
            .build();

    public CalculationResponse calculatePremium(CalculationRequest req) {

        // Prepare coherent payload
        var payload = new java.util.HashMap<String, Object>();
        payload.put("age", req.getAge());
        payload.put("sumAssured", req.getSumAssured());
        payload.put("policyTerm", req.getPolicyTerm());
        payload.put("ppt", req.getPpt());
        payload.put("planCode", req.getPlanCode());
        payload.put("gender", req.getGender());
        payload.put("smoker", req.isSmoker());

        // Call coherent
        return client.post()
                .uri("/premium")
                .bodyValue(payload)
                .retrieve()
                .bodyToMono(CalculationResponse.class)
                .block();
    }
}


---

ЁЯЯж 4. Create Controller тЖТ CalculationController.java

package com.eapp.calculation.controller;

import com.eapp.calculation.dto.CalculationRequest;
import com.eapp.calculation.dto.CalculationResponse;
import com.eapp.calculation.service.CoherentService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/api/calc")
@CrossOrigin("*")
public class CalculationController {

    @Autowired
    private CoherentService coherentService;

    @PostMapping("/premium")
    public CalculationResponse calculate(@RequestBody CalculationRequest request){
        return coherentService.calculatePremium(request);
    }
}


---

ЁЯЯй FRONTEND тАФ рддреВ рдмрдирд╡рд▓реЗрд▓рдВ Plan & Coverage page

рдЗрдереЗ рддреБрдЭрд╛ Calculate Premium рдмрдЯрдг coherent рд▓рд╛ hit рдХрд░реЗрд▓.

Add this in PlanAndCoverage component:

import { calculatePremium } from "../../api/calculationApi";

calculatePremium function:

ЁЯУД File: /src/api/calculationApi.ts

import axios from "axios";

export const calculatePremium = async (data: any) => {
  const res = await axios.post("http://localhost:8080/api/calc/premium", data);
  return res.data;
};


---

Now add button event inside PlanAndCoverage:

const handlePremiumCalculation = async () => {
    const payload = {
        age: savedTransaction[0]?.txn_input_json?.Age,
        sumAssured: fields.basicSumInsured,
        policyTerm: fields.insuranceTerm,
        ppt: fields.ppt,
        planCode: fields.basicPlan,
        gender: savedTransaction[0]?.txn_input_json?.Gender,
        smoker: savedTransaction[0]?.txn_input_json?.SmokingStatus == "YES"
    };

    const result = await calculatePremium(payload);
    alert("Total Premium = " + result.totalPremium);
};


---

Add button inside JSX:

<button onClick={handlePremiumCalculation}>
  Calculate Premium
</button>


---

ЁЯОЙ CONGRATULATIONS тАФ рддреБрдЭрд╛ тАЬPremium Calculation EngineтАЭ рдкреВрд░реНрдг рдЭрд╛рд▓рд╛

рд╣реЗ engine:

тЬФя╕П form рдордзреВрди data рдШреЗрддреЗ
тЬФя╕П coherent рд▓рд╛ payload рдмрдирд╡реВрди рдкрд╛рдард╡рддреЗ
тЬФя╕П premium calculate рдХрд░реВрди рдЖрдгрддреЗ
тЬФя╕П frontend рд╡рд░ рджрд╛рдЦрд╡рддреЗ

рд╣реЗрдЪ рддреБрдЭрдВ WORK TASK рдЖрд╣реЗ.


---

Anurag тАФ рддреБрд▓рд╛ рдЖрддрд╛ рдХреЛрдгрддрд╛ Part рдЕрдзрд┐рдХ detail рдордзреНрдпреЗ рд╣рд╡рд╛?

1я╕ПтГг Frontend рдордзреНрдпреЗ UI design
2я╕ПтГг Coherent payload format рд╕реБрдзрд╛рд░реВрди рджреЗрдК?
3я╕ПтГг Response structure compatible рдмрдирд╡реВ?
4я╕ПтГг рддреБрдЭреНрдпрд╛ EAPP рдкреНрд░реЛрдЬреЗрдХреНрдЯрдордзреНрдпреЗ рдкреВрд░реНрдг integrate рдХрд░реВрди рджреЗрдК?

рдлрдХреНрдд рдирдВрдмрд░ рд╕рд╛рдВрдЧ тАФ рдореА рд▓рдЧреЗрдЪ рдкреБрдвреЗ complete рдХрд░реВрди рджреЗрддреЛ.
