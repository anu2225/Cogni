
‡§†‡•Ä‡§ï ‡§Ü‡§π‡•á ‚Äî ‡§á‡§Æ‡•á‡§ú ‡§Ü‡§£‡§ø error ‡§¨‡§ò‡•Ç‡§® issue ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü ‡§Ü‡§π‡•á: ‡§§‡•Å‡§ù‡•ç‡§Ø‡§æ code ‡§Æ‡§ß‡•ç‡§Ø‡•á COHERENT_LOCAL_PROXY undefined ‡§Ü‡§π‡•á, ‡§Æ‡•ç‡§π‡§£‡§ú‡•á ‡§ú‡§ø‡§•‡•á URL ‡§†‡•á‡§µ‡§≤‡§Ç‡§Ø ‡§§‡§ø‡§•‡•á ‡§ï‡§æ‡§π‡•Ä constant ‡§ï‡§ø‡§Ç‡§µ‡§æ env variable set ‡§®‡§æ‡§π‡•Ä. ‡§§‡•ç‡§Ø‡§æ‡§Æ‡•Å‡§≥‡•á getPremium ‡§´‡§Ç‡§ï‡•ç‡§∂‡§® run ‡§π‡•ã‡§§‡§æ‡§®‡§æ ReferenceError ‡§Ø‡•á‡§§‡•á ‡§Ü‡§£‡§ø ‡§Æ‡§ó API call/401-403 errors ‡§Ø‡•á‡§§‡§æ‡§§.

‡§Æ‡•Ä ‡§ñ‡§æ‡§≤‡•Ä ‡§è‡§ï ‡§∏‡§æ‡§´, ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§£‡§æ‡§∞‡§æ fix ‡§¶‡•á‡§§‡•ã ‚Äî ‡§•‡•á‡§ü usable ‡§´‡§æ‡§à‡§≤‡•ç‡§∏ / ‡§ï‡•ã‡§° ‡§∏‡•ç‡§®‡§ø‡§™‡•á‡§ü‡•ç‡§∏ (TypeScript / React) ‡§ú‡•á ‡§§‡•Å‡§ù‡•ç‡§Ø‡§æ PlanAndCoverage.tsx ‡§Ü‡§£‡§ø ‡§è‡§ï ‡§õ‡•ã‡§ü‡§æ premiumService.ts ‡§µ‡§æ‡§™‡§∞‡•Ç‡§® ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡•Ä‡§≤. ‡§§‡•Å‡§ù‡•ç‡§Ø‡§æ ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§¨‡§¶‡§≤ ‡§´‡§ï‡•ç‡§§ ‡§π‡•ç‡§Ø‡§æ‡§ö ‡§´‡§æ‡§à‡§≤‡•ç‡§∏‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§ï‡§∞‡§æ‡§Ø‡§ö‡•á ‚Äî ‡§¨‡§æ‡§ï‡•Ä code ‡§ú‡§∏‡§æ‡§ö‡•ç‡§Ø‡§æ ‡§§‡§∂‡§æ ‡§∞‡§æ‡§π‡•Ä‡§≤.


---

1) ENV ‡§∏‡•á‡§ü‡§Ö‡§™ (‡§ñ‡•Ç‡§™ ‡§Æ‡§π‡§§‡•ç‡§§‡•ç‡§µ‡§æ‡§ö‡•á)

‡§§‡•Å‡§Æ‡•ç‡§π‡•Ä .env ‡§ï‡§ø‡§Ç‡§µ‡§æ Vite ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§ñ‡§æ‡§≤‡•Ä‡§≤ value ‡§†‡•á‡§µ‡§æ (‡§§‡•Å‡§ù‡•ç‡§Ø‡§æ proxy ‡§ï‡§ø‡§Ç‡§µ‡§æ coherent endpoint ‡§®‡•Å‡§∏‡§æ‡§∞):

.env

VITE_COHERENT_PROXY=http://localhost:8001/api/calc/premium
# ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§•‡•á‡§ü coherent url (but token/CORS ‡§Æ‡•Å‡§¶‡•ç‡§¶‡•á ‡§Ö‡§∏‡§§‡•Ä‡§≤)
# VITE_COHERENT_PROXY=https://excel.uat.us.coherent.global/cognizant/api/v3/folders/Sanjana_Test/services/Universal-Life-product-TestPrd/execute

‡§®‡§Ç‡§§‡§∞ dev server restart ‡§ï‡§∞‡§æ (npm run dev).

> ‡§≤‡§ï‡•ç‡§∑‡§æ‡§§ ‡§†‡•á‡§µ: ‡§§‡•á direct coherent endpoint ‡§Ö‡§∏‡•á‡§≤ ‡§§‡§∞ CORS/Authorization issue ‡§Ø‡•á‡§ä ‡§∂‡§ï‡§§‡•á ‚Äî ‡§Æ‡§ó ‡§§‡•Å‡§Æ‡•ç‡§π‡•Ä local backend (http://localhost:8001/api/calc/premium) run ‡§ï‡§∞‡•Ç‡§® proxy ‡§ï‡§∞‡§æ‡§µ‡•á.




---

2) src/services/premiumService.ts ‚Äî API wrapper (‡§â‡§™‡§Ø‡•Å‡§ï‡•ç‡§§ ‡§Ü‡§£‡§ø ‡§∏‡§æ‡§´)

// src/services/premiumService.ts
export interface PremiumFields {
  // ‡§´‡§ï‡•ç‡§§ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§´‡•Ä‡§≤‡•ç‡§°‡•ç‡§∏ ‚Äî ‡§§‡•Å‡§ù‡•ç‡§Ø‡§æ fields ‡§®‡•Å‡§∏‡§æ‡§∞ ‡§è‡§°‡§ú‡§∏‡•ç‡§ü ‡§ï‡§∞
  _1a_DOB?: string;
  _1b_Product?: string;
  _1c_Gender?: string;
  _1d_Face_Amount?: number;
  _1e_Occupation?: number | string;
  _1h_Policy_Inception_Date?: string;
  _1i_Smoker?: string;
  _1j_Pre_Existing_Disease?: string;
  _1k_Extra_mortality?: number; // 0.75 etc.
  _1p_Policy_Term?: number;
  _1r_Mandatory_Premium_Period?: string;
}

const getProxyUrl = () => {
  const url = import.meta.env.VITE_COHERENT_PROXY;
  if (!url) throw new Error("VITE_COHERENT_PROXY is not defined in .env");
  return url;
};

export async function callPremiumApi(fields: PremiumFields, token?: string) {
  const url = getProxyUrl();

  // Build request body exactly as coherent expects
  const requestBody = {
    request_data: {
      inputs: {
        "_1a_DOB": fields._1a_DOB,
        "_1b_Product": fields._1b_Product,
        "_1c_Gender": fields._1c_Gender,
        "_1d_Face_Amount": fields._1d_Face_Amount,
        "_1e_Occupation": fields._1e_Occupation,
        "_1h_Policy_Inception_Date": fields._1h_Policy_Inception_Date,
        "_1i_Smoker": fields._1i_Smoker,
        "_1j_Pre_Existing_Disease": fields._1j_Pre_Existing_Disease,
        "_1k_Extra_mortality": fields._1k_Extra_mortality,
        "_1p_Policy_Term": fields._1p_Policy_Term,
        "_1r_Mandatory_Premium_Period": fields._1r_Mandatory_Premium_Period,
        // hardcoded ones
        "_1zb_PAV": 0,
        "_1zc_per_mille_rating_death": 1,
        "_1zd_per_mille_rating_TPD": 1,
        "_1ze_per_mille_rating_SCI": 1,
        "_2a_Death_Benefit": "Y",
        "_2b_Total_and_Permanent_Disability_TPD": "Y",
        "_2c_Accidental_Death_and_Dismemberment_ADD": "Y",
        "_2d_Staged_Critical_Illness_SCI": "Y",
        "_2e_Hospital_Cash_Benefit_HCB": "Y",
        "_3a_Partial_Withdrawl": "Y",
        "_3b_Partial_Withdrawl_Amount": 5000
      }
    },
    request_meta: {
      version_id: "57e38b87-052c-4fb1-a6c5-76bd1567df2d",
      call_purpose: "Spark - API Tester",
      source_system: "SPARK",
      correlation_id: null,
      requested_output: null,
      service_category: ""
    }
  };

  const headers: Record<string,string> = {
    "Content-Type": "application/json",
  };
  if (token) headers["Authorization"] = `Bearer ${token}`;

  const resp = await fetch(url, {
    method: "POST",
    headers,
    body: JSON.stringify(requestBody),
  });

  if (!resp.ok) {
    // Throw detailed error for debugging
    const txt = await resp.text().catch(()=>"");
    const err = new Error(`HTTP error! status: ${resp.status} - ${txt}`);
    // @ts-ignore
    err.status = resp.status;
    throw err;
  }

  const data = await resp.json();
  return data;
}


---

3) PlanAndCoverage.tsx ‡§Æ‡§ß‡•ç‡§Ø‡•á getPremium ‡§µ‡§æ‡§™‡§∞‡§£‡•á ‡§Ü‡§£‡§ø button (‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§¨‡§¶‡§≤)

‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§´‡§æ‡§Ø‡§≤‡§ï‡§°‡•á ‡§ú‡§ø‡§•‡•á ‡§§‡•Å‡§Æ‡•ç‡§π‡•Ä getPremium ‡§†‡•á‡§µ‡§≤‡§æ ‡§Ü‡§π‡•á ‡§§‡§ø‡§•‡•á ‡§ñ‡§æ‡§≤‡•Ä‡§≤ ‡§¨‡§¶‡§≤ ‡§ï‡§∞:

// PlanAndCoverage.tsx (relevant parts)
// ‡§ä‡§™‡§∞‡§ö‡•ç‡§Ø‡§æ imports ‡§Æ‡§ß‡•ç‡§Ø‡•á add ‡§ï‡§∞:
import { callPremiumApi } from "../services/premiumService";

// ... component function ‡§Æ‡§ß‡•ç‡§Ø‡•á
const [loading, setLoading] = useState(false);
const [apiToken, setApiToken] = useState<string | undefined>(undefined); // set from localStorage or UI when available

const onCalculatePremium = async () => {
  try {
    setLoading(true);

    // Map your fields -> API inputs
    const payload = {
      _1a_DOB: fields.Policy_Inception_Date ?? fields.Policy_Inception_Date, // update mapping as needed
      _1b_Product: fields.Product || "Option A",
      _1c_Gender: fields.basicPlan /* <- replace with real gender field if present */ || "Male",
      _1d_Face_Amount: Number(fields.basicSumInsured || 200000),
      _1e_Occupation: fields.per_mille_rating_death || 4,
      _1h_Policy_Inception_Date: fields.Policy_Inception_Date || new Date().toISOString().split('T')[0],
      _1i_Smoker: fields.Smoker === "Yes" ? "Y" : "N",
      _1j_Pre_Existing_Disease: fields.Pre_Existing_Disease === "Yes" ? "Y" : "N",
      _1k_Extra_mortality: Number((fields.Extra_mortality || "75%").replace("%",""))/100,
      _1p_Policy_Term: Number(fields.Policy_Term || 45),
      _1r_Mandatory_Premium_Period: fields.Mandatory_Premium_Period || "ErrName",
    };

    const data = await callPremiumApi(payload, apiToken);
    // example response handling:
    const outputs = data?.response_data?.outputs;
    if (outputs) {
      const accdmgPrem = outputs?.AccidentalDamagePremium ?? 0;
      const terrorismPrem = outputs?.TerrorismPremium ?? 0;
      const floodPrem = outputs?.FloodPremium ?? 0;
      const firePrem = outputs?.FirePremium ?? 0;
      const earthquakePrem = outputs?.EarthquakePremium ?? 0;

      const total = accdmgPrem + terrorismPrem + floodPrem + firePrem + earthquakePrem;

      // update fields state
      setFields({
        ...fields,
        basicPlanPremium: String(total),
        // store individual values if needed
      });
      console.log("Premium outputs", outputs);
    } else {
      console.warn("No outputs from premium API", data);
      alert("Premium API returned no outputs. Check console.");
    }
  } catch (err:any) {
    console.error("Error fetching premium data:", err);
    if (err.status === 401) {
      alert("Unauthorized (401). Check token.");
    } else if (err.status === 403) {
      alert("Forbidden (403). Check proxy or backend permissions.");
    } else {
      alert("Error fetching premium: " + err.message);
    }
  } finally {
    setLoading(false);
  }
};

// In JSX render where appropriate add a button:
<Button variant="contained" onClick={onCalculatePremium} disabled={loading}>
  {loading ? "Calculating..." : "Calculate Premium"}
</Button>

> ‡§®‡•ã‡§ü: ‡§µ‡§∞‡§ö‡•ç‡§Ø‡§æ payload mapping ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§Æ‡•Ä field names ‡§§‡•Å‡§ù‡•ç‡§Ø‡§æ fields ‡§®‡•Å‡§∏‡§æ‡§∞ guessed ‡§ï‡•á‡§≤‡•á‡§§ ‚Äî ‡§§‡•Å‡§ù‡•ç‡§Ø‡§æ LifeAssured ‡§ï‡§ø‡§Ç‡§µ‡§æ PlanAndCoverage ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§ú‡•ç‡§Ø‡§æ ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï fields ‡§Ü‡§π‡•á‡§§ ‡§§‡•ç‡§Ø‡§æ‡§®‡•Å‡§∏‡§æ‡§∞ _1a_DOB, _1c_Gender ‡§µ‡§ó‡•à‡§∞‡•á ‡§®‡•Ä‡§ü set ‡§ï‡§∞.




---

4) COHERENT_LOCAL_PROXY is not defined ‡§ö‡§æ ‡§Æ‡•Ç‡§≥ ‡§â‡§™‡§æ‡§Ø

OPTION A (Recommended): .env ‡§Æ‡§ß‡•ç‡§Ø‡•á VITE_COHERENT_PROXY define ‡§ï‡§∞‡§æ ‡§Ü‡§£‡§ø premiumService ‡§Æ‡§ß‡•ç‡§Ø‡•á import.meta.env ‡§µ‡§æ‡§™‡§∞. (‡§π‡•Ä method ‡§Æ‡•Ä ‡§µ‡§∞ ‡§¶‡§ø‡§≤‡•Ä ‡§Ü‡§π‡•á)

OPTION B: ‡§ú‡§∞ code ‡§Æ‡§ß‡•ç‡§Ø‡•á COHERENT_LOCAL_PROXY ‡§Æ‡•ç‡§π‡§£‡•Ç‡§® global variable ‡§µ‡§æ‡§™‡§∞‡§≤‡§æ ‡§Ö‡§∏‡•á‡§≤ ‡§§‡§∞ ‡§§‡•á ‡§ï‡§æ‡§¢‡§æ ‡§Ü‡§£‡§ø ‡§µ‡§∞‡§ö‡•ç‡§Ø‡§æ import.meta.env approach ‡§µ‡§æ‡§™‡§∞‡§æ.

‡§ï‡•Å‡§†‡•á‡§π‡•Ä COHERENT_LOCAL_PROXY ‡§∂‡•ã‡§ß‡•Ç‡§® const url = COHERENT_LOCAL_PROXY + "/..." ‡§Ö‡§∏‡•á‡§≤ ‡§§‡§∞ ‡§¨‡§¶‡§≤‡•Ç‡§® getProxyUrl() ‡§µ‡§æ‡§™‡§∞ ‡§ï‡§∞‡§æ.




---

5) CORS / 401 / 403 handling ‚Äî practical tips

Browser ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§•‡•á‡§ü coherent endpoint hit ‡§ï‡§∞‡§§‡§æ ‡§Ø‡•á‡§§ ‡§®‡§∏‡•á‡§≤ (401/401/ERR_ABORTED) ‚Äî ‡§Æ‡§ó ‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ local backend/proxy (http://localhost:8001) ‡§ö‡§æ‡§≤‡§µ‡•Ç‡§® POST /api/calc/premium route ‡§§‡§Ø‡§æ‡§∞ ‡§ï‡§∞. ‡§§‡•ç‡§Ø‡§æ backend ‡§ï‡§°‡•Ç‡§® coherent ‡§≤‡§æ Request ‡§≠‡•á‡§ú‡§æ (server side) ‚Äî server ‡§Æ‡§ß‡•ç‡§Ø‡•á token/credentials secure ‡§†‡•á‡§µ‡•Ç ‡§∂‡§ï‡§§‡•ã.

Backend ‡§®‡§∏‡•á‡§≤ ‡§§‡§∞ ‡§è‡§ï ‡§´‡§æ‡§∞ ‡§∏‡•ã‡§™‡§æ express proxy ‡§¨‡§®‡§µ‡§æ (examples ‡§¶‡•á‡§ä ‡§∂‡§ï‡§§‡•ã) ‚Äî ‡§™‡§£ ‡§Ü‡§ß‡•Ä .env set ‡§ï‡§∞‡§æ ‡§Ü‡§£‡§ø browser ‡§Æ‡§ß‡•ç‡§Ø‡•á direct fetch ‡§ï‡§∞‡•Ç‡§® ‡§™‡§æ‡§π‡§æ.



---

6) Quick checklist ‚Äî ‡§≤‡§ó‡•á‡§ö ‡§ï‡§∞:

1. .env ‡§Æ‡§ß‡•ç‡§Ø‡•á VITE_COHERENT_PROXY=... set ‡§ï‡§∞ ‡§Ü‡§£‡§ø dev restart ‡§ï‡§∞‡§æ.


2. src/services/premiumService.ts ‡§´‡§æ‡§à‡§≤ ‡§§‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡§æ (‡§µ‡§∞‡§ö‡§æ code).


3. PlanAndCoverage.tsx ‡§Æ‡§ß‡•ç‡§Ø‡•á onCalculatePremium function paste ‡§ï‡§∞ ‡§Ü‡§£‡§ø button ‡§†‡•á‡§µ‡§æ.


4. ‡§ï‡•ã‡§£‡§§‡•Ä‡§π‡•Ä COHERENT_LOCAL_PROXY references ‡§∂‡•ã‡§ß‡•Ç‡§® ‡§ï‡§æ‡§¢‡§æ ‡§ï‡§ø‡§Ç‡§µ‡§æ replace ‡§ï‡§∞‡§æ. (IDE ‡§Æ‡§ß‡•ç‡§Ø‡•á search ‡§ï‡§∞‡§æ)


5. Token ‡§Ö‡§∏‡•á‡§≤ ‡§§‡§∞ localStorage.getItem('token') ‡§ï‡§ø‡§Ç‡§µ‡§æ UI ‡§®‡•á setApiToken ‡§Æ‡§ß‡•ç‡§Ø‡•á set ‡§ï‡§∞‡§æ.




---

‡§Æ‡§≤‡§æ ‡§Ü‡§§‡§æ ‡§è‡§ï small ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§æ‡§Ø‡§ö‡§æ ‡§Ü‡§π‡•á ‚Äî ‡§§‡•Å‡§ù‡•ç‡§Ø‡§æ ‡§∏‡§æ‡§†‡•Ä ready-to-paste full files ‡§¶‡•ç‡§Ø‡§æ‡§Ø‡§ö‡•á. ‡§™‡§£ ‡§Æ‡•Ä ‡§á‡§Ç‡§ú‡•ã‡§Ö‡§ö‡•ç‡§Ø‡§æ‡§π‡•Ä ‡§Ü‡§ß‡•Ä ‡§ñ‡§æ‡§§‡•ç‡§∞‡•Ä ‡§ï‡§∞‡§§‡•ã ‡§ï‡•Ä VITE_COHERENT_PROXY ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ set ‡§ï‡§∞‡§æ‡§Ø‡§ö‡•Ä ‡§Ü‡§π‡•á ‡§ï‡•Ä ‡§®‡§æ‡§π‡•Ä ‚Äî ‡§ï‡§æ‡§∞‡§£ ‡§ú‡§∞ direct coherent endpoint ‡§µ‡§æ‡§™‡§∞‡§æ‡§Ø‡§ö‡§æ ‡§Ö‡§∏‡•á‡§≤ ‡§§‡§∞ token ‡§Ü‡§£‡§ø CORS ‡§≤‡§æ‡§ó‡§§‡•Ä‡§≤. ‡§§‡•Ç ‡§ú‡•á ‡§Æ‡•ç‡§π‡§£‡§∂‡•Ä‡§≤ ‡§§‡•á ‡§Æ‡•Ä ‡§™‡•Å‡§¢‡•á paste ‡§ï‡§∞‡•á‡§®:

A) full premiumService.ts (‡§¶‡§ø‡§≤‡§Ç ‡§Ü‡§π‡•á)

B) updated PlanAndCoverage.tsx (‡§™‡•Ç‡§∞‡•ç‡§£ component) ‚Äî ‡§ú‡•á ‡§•‡•á‡§ü ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡•á‡§≤

C) ‡§õ‡•ã‡§ü‡§æ express proxy server sample (‡§ú‡§∞ backend ‡§®‡§∏‡•á‡§≤ ‡§§‡§∞)


‡§∏‡§æ‡§ó ‡§ï‡•Ä ‡§Æ‡•Ä ‡§™‡•Å‡§¢‡•á ‡§ï‡•ã‡§£‡§§‡§æ combo paste ‡§ï‡§∞‡§æ‡§µ‡§æ ‚Äî ‡§Æ‡•Ä ‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§´‡§æ‡§à‡§≤‡•ç‡§∏ copy-paste ‡§¶‡•á‡§à‡§® (Marathi ‡§Æ‡§ß‡•ç‡§Ø‡•á).








‡§†‡•Ä‡§ï ‡§Ü‡§π‡•á ‡§≠‡§æ‡§ä ‚úî
Token ‡§Æ‡§ø‡§≥‡§æ‡§≤‡§æ (obfuscated ‡§Ü‡§π‡•á ‡§™‡§£ ‡§ö‡§æ‡§≤‡•á‡§≤)
‡§Ü‡§§‡§æ ‡§Æ‡•Ä ‡§§‡•Å‡§≤‡§æ FULL FINAL WORKING Coherent Premium API Integration ‡§¶‡•á‡§§‡•ã ‚Äî
‡§§‡•Å‡§ù‡•ç‡§Ø‡§æ ‡§¶‡•ã‡§® files (Life Assured Details + Plan & Coverage) ‡§∏‡•ã‡§¨‡§§ perfectly match ‡§π‡•ã‡§à‡§≤,
‡§ï‡•Å‡§†‡§≤‡§æ‡§π‡•Ä backend ‡§® ‡§µ‡§æ‡§™‡§∞‡§§‡§æ, ‡§´‡§ï‡•ç‡§§ frontend ‚Üí direct Coherent API call.


---

‚úÖ FINAL ‚Äî premiumApi.js

(‡§π‡•Ä ‡§´‡§æ‡§à‡§≤ ‡§§‡•Ç /src/api/premiumApi.js ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§†‡•á‡§µ)

import axios from "axios";

export const getPremium = async (inputs) => {
  try {
    const token = "eyJhbGc101JSUzIiNiisingScCigoiAiSlduliwia2lkIiA6ICJ3b2ZGYnJPNWQyWWpaSnVrSHR5Q3Z4cU1QeHBHMXB1emhPYm9qUjVkb3NnIn@.eyJ...";
    
    const body = {
      request_data: { inputs },
      request_meta: {
        version_id: "57e38b87-052c-4fb1-a6c5-76bd1567df2d",
        call_purpose: "Spark - API Tester",
        source_system: "SPARK"
      }
    };

    const response = await axios.post(
      "https://excel.uat.us.coherent.global/cognizant/api/v3/folders/Sanjana_Test/services/Universal-Life-product-TestPrd/execute",
      body,
      {
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${token}`
        }
      }
    );

    return response.data;
  } catch (error) {
    console.error("Premium API Error:", error);
    throw new Error("API Error");
  }
};


---

‚úÖ ‡§Ü‡§§‡§æ PlanAndCoverage.tsx ‡§Æ‡§ß‡•ç‡§Ø‡•á ‚Äî API CALL BUTTON + LOGIC

‡§§‡•Å‡§ù‡•ç‡§Ø‡§æ PlanAndCoverage file ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§´‡§ï‡•ç‡§§ ‡§è‡§ï ‡§õ‡•ã‡§ü‡§æ ‡§≠‡§æ‡§ó add ‡§ï‡§∞‡§æ‡§Ø‡§ö‡§æ ‡§Ü‡§π‡•á:
(‡§¨‡§æ‡§ï‡•Ä ‡§ï‡§æ‡§π‡•Ä‡§π‡•Ä delete ‡§ï‡§∞‡§æ‡§Ø‡§ö‡•á ‡§®‡§æ‡§π‡•Ä ‚Äî ‡§§‡•Å‡§ù‡•á ‡§¶‡•ã‡§® files untouched ‡§†‡•á‡§µ‡§§‡•ã)

1Ô∏è‚É£ ‡§π‡•á top ‡§µ‡§∞ import ‡§ï‡§∞

import { getPremium } from "../api/premiumApi";


---

2Ô∏è‚É£ ‡§ñ‡§æ‡§≤‡•Ä ‡§è‡§ï "GET PREMIUM" ‡§¨‡§ü‡§£ add ‡§ï‡§∞

‡§π‡•á Riders section ‡§®‡§Ç‡§§‡§∞ ‡§†‡•á‡§µ:

<button
  style={{
    backgroundColor: "#000048",
    color: "white",
    padding: "10px 20px",
    borderRadius: "6px",
    border: "none",
    marginTop: "20px",
    cursor: "pointer"
  }}
  onClick={async () => {
    try {
      const inputs = {
        _1a_DOB: savedTransaction?.[0]?.txn_input_json?.DOB || "1976-10-08",
        _1b_Product: fields.Product,
        _1c_Gender: savedTransaction?.[0]?.txn_input_json?.Gender || "Male",
        _1d_Face_Amount: Number(fields.basicSumInsured),
        _1e_Occupation: 4,

        _1h_Policy_Inception_Date: fields.Policy_Inception_Date,
        _1i_Smoker: fields.Smoker === "Yes" ? "Y" : "N",
        _1j_Pre_Existing_Disease: fields.Pre_Existing_Disease === "Yes" ? "Y" : "N",
        _1k_Extra_mortality: parseFloat(fields.Extra_mortality) / 100,

        _1p_Policy_Term: Number(fields.Policy_Term),
        _1r_Mandatory_Premium_Period: fields.Mandatory_Premium_Period,

        _1zb_PAV: 0,
        _1zc_per_mille_rating_death: 1,
        _1zd_per_mille_rating_TPD: 1,
        _1ze_per_mille_rating_SCI: 1,

        _2a_Death_Benefit: "Y",
        _2b_Total_and_Permanent_Disability_TPD: "Y",
        _2c_Accidental_Death_and_Dismemberment_ADD: "Y",
        _2d_Staged_Critical_Illness_SCI: "Y",
        _2e_Hospital_Cash_Benefit_HCB: "Y",

        _3a_Partial_Withdrawl: "Y",
        _3b_Partial_Withdrawl_Amount: 5000
      };

      const result = await getPremium(inputs);

      alert("Premium Calculated Successfully! Check console.");
      console.log("FULL PREMIUM RESPONSE:", result);

    } catch (error) {
      alert("Premium API Error");
      console.error("Premium API Error:", error);
    }
  }}
>
  GET PREMIUM
</button>


---

üî• ‡§Ü‡§§‡§æ Complete Flow ‡§Ö‡§∏‡•á ‡§π‡•ã‡§à‡§≤

1. User life assured details ‡§≠‡§∞‡§§‡•ã

2. User plan & coverage ‡§≠‡§∞‡§§‡•ã

3. Button ‚Üí ‚ÄúGET PREMIUM‚Äù

4. Frontend direct Coherent API execute ‡§ï‡§∞‡§§‡•ã

5. Response console ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§¶‡§ø‡§∏‡•á‡§≤

6. ‡§π‡§µ‡§æ ‡§Ö‡§∏‡•á‡§≤ ‡§§‡§∞ ‡§Æ‡•Ä UI ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§ü‡•á‡§¨‡§≤ ‡§ï‡§∞‡•Ç‡§® ‡§¶‡•á‡§à‡§®


---

üü¢ IMPORTANT

‡§§‡•Å‡§ù‡§æ token ‡§ú‡•á ‡§§‡•Ç ‡§¶‡§ø‡§≤‡§æ‡§∏ ‡§§‡•ã ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§¶‡§ø‡§∏‡§§ ‡§®‡§æ‡§π‡•Ä (partially corrupted ‡§Ü‡§π‡•á ‚Üí ‡§ï‡§æ‡§π‡•Ä characters @ ‡§Ü‡§£‡§ø ? ‡§Ü‡§π‡•á‡§§).

‚ùó If API ‡§Ö‡§ú‡•Ç‡§® 401 ‡§¶‡•á‡§§ ‡§Ö‡§∏‡•á‡§≤
üëâ ‡§Æ‡§≤‡§æ full correct token ‡§¶‡•á (mask ‡§ï‡§∞‡•Ç‡§®)
‡§Æ‡•Ä verify ‡§ï‡§∞‡•Ç‡§® new working signing format ‡§¶‡•á‡§§‡•ã.


---

‡§π‡§µ‡§Ç ‡§Ö‡§∏‡•á‡§≤ ‡§§‡§∞:

‚úî ‡§Æ‡•Ä Premium UI table ‡§¨‡§®‡§µ‡•Ç‡§® ‡§¶‡•á‡§ä
‚úî Output summary auto-fill ‡§ï‡§∞‡•Ç‡§® ‡§¶‡•á‡§ä
‚úî Whole app ‡§ö‡•Ä final production code ‡§¶‡•á‡§ä
‚úî 1-click coherent premium integration


---

‡§≠‡§æ‡§ä ‡§∏‡§æ‡§Ç‡§ó ‚Äî
UI ‡§Æ‡§ß‡•ç‡§Ø‡•á Premium ‡§ï‡§∏‡§æ ‡§¶‡§æ‡§ñ‡§µ‡§æ‡§Ø‡§ö‡§æ? ‡§ü‡•á‡§¨‡§≤? Box? Quotation ‡§∏‡§æ‡§∞‡§ñ‡§æ?



eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ3b2ZGYnJPNWQyWWpaSnVrSHR5Q3Z4cU1QeHBHMXB1emhPYm9qUjVkb3NnIn0.eyJleHAiOjE3NjU0NjA5MjIsImlhdCI6MTc2NTQ1MzcyMiwiYXV0aF90aW1lIjoxNzY1NDUzNzIwLCJqdGkiOiJvbnJ0YWM6NTYyMTMxMzUtMmE2Yy00NTE0LWE0YmItNTgxOTM2ZWVhYmNlIiwiaXNzIjoiaHR0cHM6Ly9rZXljbG9hay51YXQudXMuY29oZXJlbnQuZ2xvYmFsL2F1dGgvcmVhbG1zL2NvZ25pemFudCIsImF1ZCI6WyJwcm9kdWN0LWZhY3RvcnkiLCJyZWFsbS1tYW5hZ2VtZW50Il0sInN1YiI6ImJkMTUxNTQ4LWQ1NmItNGVhZS1iNmNhLTM4ODZkZjIxMDQyNyIsInR5cCI6IkJlYXJlciIsImF6cCI6InByb2R1Y3QtZmFjdG9yeSIsInNpZCI6IjdkMDE0NTMzLTFlOTUtNGQ4NC1iMzQwLWI1MDllY2IyZGYwZSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL21vZGVsaW5nLWNlbnRlci5kZXYuY29oZXJlbnQuZ2xvYmFsIiwiaHR0cHM6Ly9zYS51YXQudXMuY29oZXJlbnQuZ2xvYmFsIiwiaHR0cHM6Ly9tb2RlbGluZy1jZW50ZXIudXMuY29oZXJlbnQuZ2xvYmFsIiwiaHR0cHM6Ly9hc3Npc3RhbnQuc3RhZ2luZy5jb2hlcmVudC5nbG9iYWwiLCJodHRwczovL3NwYXJrLnVhdC51cy5jb2hlcmVudC5nbG9iYWwiLCJodHRwczovL2Fzc2lzdGFudC5leHQuY29oZXJlbnQuZ2xvYmFsIiwiaHR0cHM6Ly9wcm9kdWN0ZmFjdG9yeS51YXQudXMuY29oZXJlbnQuZ2xvYmFsIiwiaHR0cHM6Ly9zcGFyay11c2VyLW1hbmFnZXIudWF0LnVzLmNvaGVyZW50Lmdsb2JhbCIsImh0dHBzOi8vc2Euc3RhZ2luZy5jb2hlcmVudC5nbG9iYWwiLCJodHRwczovL21vZGVsaW5nLWNlbnRlci5zdGFnaW5nLmNvaGVyZW50Lmdsb2JhbCJdLCJyZXNvdXJjZV9hY2Nlc3MiOnsicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJ2aWV3LXVzZXJzIiwicXVlcnktZ3JvdXBzIiwicXVlcnktdXNlcnMiXX19LCJzY29wZSI6Im9wZW5pZCBzcGFyayBwcm9maWxlIiwibmFtZSI6IlNheWFuIERlIiwiZ3JvdXBzIjpbInVzZXI6cGYiXSwicmVhbG0iOiJjb2duaXphbnQiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzYXlhbi5kZUBjb2duaXphbnQuY29tIiwiZ2l2ZW5fbmFtZSI6IlNheWFuIiwiZmFtaWx5X25hbWUiOiJEZSIsInVzZXJfY3JlYXRlZF90aW1lc3RhbXAiOjE2OTI3MTE1MTU1MTUsInJlbGF0aW9uIjoicGFydG5lciJ9.LVlnEQvIGk2lrEom8WspWeACpgcmxag-abzSf8BT-n-iImncuphEoA9GdS967gViC1D20rJoJxGdap22IKq9kuqjYAaPg-ihnAwBJCAxXan1Y-VjeOF_abT0LBMDH5LJ8NTdV9xl_-4hqCWHa-VzkuMO-6CmE8E_ZXTGtWdu0tllVkXgFuVlgS6A_LyX9JyGE38Dgf6tyQ1rPMhSegEJJy24y1HuRggHca4Hji4EG0stb99mswI3HE-dxbuVgzjxaIqhxN1s0tZwyBK22Lmelk4Kv_8BNwpNNmZrU4YW-3RIY8nmI6VO7UkFKQn4gExhjM1CGfA2tPCYujAF3I10hA
