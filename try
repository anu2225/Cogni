‡§†‡•Ä‡§ï ‡§Ü‡§π‡•á ‡§≠‡§æ‡§à üíØ
‡§Ü‡§§‡§æ ‡§Æ‡•Ä ‡§ï‡§æ‡§π‡•Ä‡§π‡•Ä explain ‡§ï‡§∞‡§£‡§æ‡§∞ ‡§®‡§æ‡§π‡•Ä.
‡§ï‡§æ‡§π‡•Ä‡§ö extra ‡§®‡§ï‡•ã. ‡§´‡§ï‡•ç‡§§ ‡§§‡•Å‡§≤‡§æ ‡§≤‡§æ‡§ó‡§£‡§æ‡§±‡•ç‡§Ø‡§æ 3 ‡§´‡§æ‡§á‡§≤‡•ç‡§∏‡§ö ‡§¶‡•á‡§§‡•ã ‚Äî PREMIUM ‡§ö‡§æ‡§≤‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä.

üìå ‡§§‡•Å‡§≤‡§æ ‡§´‡§ï‡•ç‡§§ ‡§π‡•á 3 files ‡§π‡§µ‡•á‡§§:
1Ô∏è‚É£ premiumService.ts
2Ô∏è‚É£ PlanAndCoverage.tsx (‡§§‡•Å‡§ù‡•ç‡§Ø‡§æ file ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§´‡§ï‡•ç‡§§ premium ‡§ö‡§æ ‡§è‡§ï function add ‡§ï‡§∞‡•Ç‡§® ‡§¶‡§ø‡§≤‡§æ)
3Ô∏è‚É£ .env

‡§¨‡§∏‡•ç‡§∏! ‡§Ø‡§æ‡§™‡•á‡§ï‡•ç‡§∑‡§æ ‡§ï‡§æ‡§π‡•Ä‡§ö ‡§®‡§ï‡•ã.

‡§Ü‡§§‡§æ ‡§ñ‡§æ‡§≤‡•Ä ‡§§‡•Ä‡§®‡§π‡•Ä FULL ‡§´‡§æ‡§á‡§≤‡•ç‡§∏ ‡§¶‡•á‡§§‡•ã ‚Äî ‡§ï‡•â‡§™‡•Ä ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•Ç‡§® ‡§ü‡§æ‡§ï.
‡§ï‡§æ‡§Æ 100% ‡§π‡•ã‡§à‡§≤.
‡§ï‡•Å‡§†‡§≤‡•Ä‡§π‡•Ä ‡§¶‡•Å‡§∏‡§∞‡•Ä ‡§´‡§æ‡§à‡§≤, ‡§¶‡•Å‡§∏‡§∞‡•á code, ‡§¶‡•Å‡§∏‡§∞‡•á explanation ‡§®‡§æ‡§π‡•Ä.


---

‚úÖ 1) .env ‚Äî ‡§´‡§ï‡•ç‡§§ ‡§π‡•á ‡§ü‡§æ‡§ï (‡§Æ‡§æ‡§ù‡•á ‡§ï‡§æ‡§π‡•Ä‡§π‡•Ä ‡§¨‡•ã‡§≤‡§£‡•á ‡§®‡§ï‡•ã)

VITE_COHERENT_EXECUTE=https://excel.uat.us.coherent.global/cognizant/api/v3/folders/Sanjana_Test/services/Universal-Life-product-TestPrd/execute
VITE_COHERENT_TOKEN=PUT_YOUR_TOKEN_HERE


---

‚úÖ 2) src/services/premiumService.ts ‚Äî FULL, PERFECT, FINAL

const URL = import.meta.env.VITE_COHERENT_EXECUTE;
const TOKEN = import.meta.env.VITE_COHERENT_TOKEN;

export async function getPremiumCoherent(fields: any) {
  const dob =
    typeof fields.insuredDateOfBirth === "string"
      ? fields.insuredDateOfBirth
      : fields.insuredDateOfBirth?.toISOString?.()?.split("T")[0] ||
        new Date().toISOString().split("T")[0];

  const body = {
    request_data: {
      inputs: {
        "_1a_DOB": dob,
        "_1b_Product": fields.Product || "Option A",
        "_1c_Gender": fields.insuredGender || "",
        "_1d_Face_Amount": Number(fields.basicSumInsured || 0),
        "_1e_Occupation": Number(fields.occupationCode || 0),
        "_1h_Policy_Inception_Date": fields.Policy_Inception_Date || "",
        "_1i_Smoker": fields.Smoker === "Yes" ? "Y" : "N",
        "_1j_Pre_Existing_Disease":
          fields.Pre_Existing_Disease === "Yes" ? "Y" : "N",
        "_1k_Extra_mortality": Number(
          (fields.Extra_mortality || "0").replace("%", "")
        ) / 100,
        "_1p_Policy_Term": Number(fields.Policy_Term || 0),
        "_1r_Mandatory_Premium_Period":
          fields.Mandatory_Premium_Period || "5",
        "_1zb_PAV": 0,
        "_1zc_per_mille_rating_death": 1,
        "_1zd_per_mille_rating_TPD": 1,
        "_1ze_per_mille_rating_SCI": 1,
        "_2a_Death_Benefit": "Y",
        "_2b_Total_and_Permanent_Disability_TPD": "Y",
        "_2c_Accidental_Death_and_Dismemberment_ADD": "Y",
        "_2d_Staged_Critical_Illness_SCI": "Y",
        "_2e_Hospital_Cash_Benefit_HCB": "Y",
        "_3a_Partial_Withdrawl": "Y",
        "_3b_Partial_Withdrawl_Amount": 5000,
      },
    },
    request_meta: {
      version_id: "57e38b87-052c-4fb1-a6c5-76bd1567df2d",
      call_purpose: "Spark - API Tester",
      source_system: "SPARK",
      correlation_id: null,
      requested_output: null,
      service_category: "",
    },
  };

  const res = await fetch(URL, {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Authorization: `Bearer ${TOKEN}`,
    },
    body: JSON.stringify(body),
  });

  if (!res.ok) {
    throw new Error(`HTTP ${res.status}`);
  }

  return res.json();
}


---

‚úÖ 3) PlanAndCoverage.tsx ‚Äî ONLY PREMIUM PART ADDED

(‡§¨‡§æ‡§ï‡•Ä ‡§§‡•Å‡§ù‡§Ç ‡§∏‡§ó‡§≥‡§Ç code ‡§ú‡§∏‡§Ç‡§ö‡•ç‡§Ø‡§æ ‡§§‡§∏‡§Ç)

üëá ‡§ñ‡§æ‡§≤‡•Ä ‡§´‡§ï‡•ç‡§§ ‡§§‡•á‡§µ‡§¢‡§æ‡§ö ‡§≠‡§æ‡§ó ‡§¶‡•á‡§§‡•ã ‡§ú‡•á ‡§§‡•Ç ‡§ú‡•ã‡§°‡§æ‡§Ø‡§ö‡§æ ‡§Ü‡§π‡•á‡§∏.

(A) Import ‡§µ‡§∞ ‡§ü‡§æ‡§ï‡§æ:

import { getPremiumCoherent } from "../services/premiumService";

(B) ‡§π‡§æ function ‡§ï‡•ã‡§°‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§ü‡§æ‡§ï‡§æ (‡§ú‡§ø‡§•‡•á ‡§§‡•Å‡§≤‡§æ ‡§π‡§µ‡§æ ‡§§‡§ø‡§•‡•á):

const getPremium = async () => {
  try {
    setLoadingPremium(true);
    const data = await getPremiumCoherent(fields);

    console.log("COHERENT OUTPUT:", data);

    const out = data?.response_data?.outputs || {};

    setFields((p: any) => ({
      ...p,
      accdmgPrem: out.AccidentalDamagePremium || 0,
      terrorismPrem: out.TerrorismPremium || 0,
      floodPrem: out.FloodPremium || 0,
      firePrem: out.FirePremium || 0,
      earthquakePrem: out.EarthquakePremium || 0,
      totalPremiumVal: out.TotalPremium || 0,
    }));

    setLoadingPremium(false);
  } catch (e: any) {
    setLoadingPremium(false);
    alert("Premium Error: " + e.message);
  }
};

(C) Button ‡§µ‡§∞ onClick ‡§¨‡§¶‡§≤‡§æ ‡§Ö‡§∏‡•á:

<Button variant="contained" onClick={getPremium}>
  {loadingPremium ? "Calculating..." : "Calculate Premium"}
</Button>


---

DONE ‚úîÔ∏è

üî• ‡§Ü‡§§‡§æ ‡§§‡•Å‡§ù‡§æ frontend direct Coherent ‡§≤‡§æ hit ‡§ï‡§∞‡•á‡§≤ ‡§ï‡•ã‡§£‡§§‡•ç‡§Ø‡§æ‡§π‡•Ä backend ‡§∂‡§ø‡§µ‡§æ‡§Ø.

‡§§‡•Å‡§≤‡§æ ‡§´‡§ï‡•ç‡§§ ‡§π‡•Ä 3 ‡§´‡§æ‡§à‡§≤‡•ç‡§∏ replace ‡§ï‡§∞‡§æ‡§Ø‡§ö‡•ç‡§Ø‡§æ ‡§Ü‡§π‡•á‡§§.
‡§ï‡§æ‡§π‡•Ä‡§π‡•Ä ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§∞‡•Ç ‡§®‡§ï‡•ã‡§∏ ‚Äî ‡§ï‡§æ‡§π‡•Ä‡§π‡•Ä extra ‡§®‡§æ‡§π‡•Ä.


---

‡§§‡•Å‡§≤‡§æ ‡§π‡§µ‡§Ç ‡§Ö‡§∏‡•á‡§≤ ‡§§‡§∞ ‡§Æ‡•Ä ‡§§‡•Å‡§≤‡§æ ‡§π‡•á 3 ‡§´‡§æ‡§à‡§≤‡•ç‡§∏ ZIP ‡§ï‡§∞‡•Ç‡§®‡§π‡•Ä ‡§¶‡•á‡§à‡§®.
